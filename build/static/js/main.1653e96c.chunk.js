(this["webpackJsonpmern-ticket-tracker"]=this["webpackJsonpmern-ticket-tracker"]||[]).push([[0],{169:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(37),i=a.n(o),c=a(21),l=a.n(c),s=a(26),u=a(18),m=a(20),h=a(6),p=a(9),d=a.n(p),g=Object(n.createContext)(null);function b(){var e=Object(n.useContext)(g),t=e.userData,a=e.setUserData,o=Object(h.f)();return r.a.createElement("nav",{className:"auth-options"},t.user?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){a({token:void 0,user:void 0}),localStorage.setItem("auth-token","")}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return o.push("/")}},"My Tickets"),r.a.createElement("button",{onClick:function(){return o.push("/create")}},"Create a New Ticket")))}function y(){return r.a.createElement("div",null,r.a.createElement("header",{id:"header"},r.a.createElement(m.b,{to:"/"},r.a.createElement("button",{className:"title"},"Ticket Tracker App")),r.a.createElement(b,null)))}var f=a(27),E=a(28),v=a(8),k=a(33),C=a(32),j=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.ticket.category),r.a.createElement("td",null,e.ticket.priority),r.a.createElement("td",null,e.ticket.subject),r.a.createElement("td",null,e.ticket.description),r.a.createElement("td",null,e.ticket.date.substring(0,10)),r.a.createElement("td",null,r.a.createElement(m.b,{to:"/edit/"+e.ticket._id},"Edit")," | ",r.a.createElement("a",{href:"#",onClick:function(){e.deleteTicket(e.ticket._id)}},"Delete")))},S=function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).deleteTicket=n.deleteTicket.bind(Object(v.a)(n)),n.state={tickets:[]},n}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.a.get("http://localhost:5000/tickets/").then((function(t){e.setState({tickets:t.data})})).catch((function(e){console.log(e)}))}},{key:"deleteTicket",value:function(e){d.a.delete("http://localhost:5000/tickets/"+e).then((function(e){return console.log(e.data)})),this.setState({tickets:this.state.tickets.filter((function(t){return t._id!==e}))})}},{key:"ticketList",value:function(){var e=this;return this.state.tickets.map((function(t){return r.a.createElement(j,{ticket:t,deleteTicket:e.deleteTicket,key:t._id})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"My Tickets"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Priority"),r.a.createElement("th",null,"Subject"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.ticketList())))}}]),a}(n.Component),O=a(40),N=a.n(O),w=(a(70),function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onChangeCategory=n.onChangeCategory.bind(Object(v.a)(n)),n.onChangePriority=n.onChangePriority.bind(Object(v.a)(n)),n.onChangeSubject=n.onChangeSubject.bind(Object(v.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(v.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(v.a)(n)),n.onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.state={displayName:"",category:"",priority:"",subject:"",description:"",date:new Date,categoryList:[],priorityList:[]},n}return Object(E.a)(a,[{key:"componentDidMount",value:function(){this.setState({categoryList:["General","Billing","Login","Abuse","Website"],category:"General",priorityList:["Low","Medium","High"],priority:"Low"})}},{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"onChangePriority",value:function(e){this.setState({priority:e.target.value})}},{key:"onChangeSubject",value:function(e){this.setState({subject:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={displayName:this.state.displayName,category:this.state.category,priority:this.state.priority,subject:this.state.subject,description:this.state.description,date:this.state.date};console.log(t),d.a.post("http://localhost:5000/tickets/add",t).then((function(e){return console.log(e.data)})),window.location="/"}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Create a New Ticket"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Category: "),r.a.createElement("select",{ref:"categoryInput",required:!0,className:"form-control",value:this.state.category,onChange:this.onChangeCategory},this.state.categoryList.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Priority: "),r.a.createElement("select",{ref:"categoryInput",required:!0,className:"form-control",value:this.state.priority,onChange:this.onChangePriority},this.state.priorityList.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Subject: "),r.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.subject,onChange:this.onChangeSubject})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description: "),r.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Date: "),r.a.createElement("div",null,r.a.createElement(N.a,{selected:this.state.date,onChange:this.onChangeDate}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Create Ticket",className:"btn btn-primary"}))))}}]),a}(n.Component)),D=function(e){Object(k.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onChangeCategory=n.onChangeCategory.bind(Object(v.a)(n)),n.onChangePriority=n.onChangePriority.bind(Object(v.a)(n)),n.onChangeSubject=n.onChangeSubject.bind(Object(v.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(v.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(v.a)(n)),n.onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.state={displayName:"",category:"",priority:"",subject:"",description:"",date:new Date,categoryList:[],priorityList:[]},n}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.a.get("http://localhost:5000/tickets/"+this.props.match.params.id).then((function(t){e.setState({category:t.data.category,priority:t.data.priority,subject:t.data.subject,description:t.data.description,date:new Date(t.data.date)})})).catch((function(e){console.log(e)})),this.setState({categoryList:["General","Billing","Login","Abuse","Website"],category:"General",priorityList:["Low","Medium","High"],priority:"Low"})}},{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"onChangePriority",value:function(e){this.setState({priority:e.target.value})}},{key:"onChangeSubject",value:function(e){this.setState({subject:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={displayName:this.state.displayName,category:this.state.category,priority:this.state.priority,subject:this.state.subject,description:this.state.description,date:this.state.date};console.log(t),d.a.post("http://localhost:5000/tickets/update/"+this.props.match.params.id,t).then((function(e){return console.log(e.data)})),window.location="/"}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Edit Ticket"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Category: "),r.a.createElement("select",{ref:"categoryInput",required:!0,className:"form-control",value:this.state.category,onChange:this.onChangeCategory},this.state.categoryList.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Priority: "),r.a.createElement("select",{ref:"categoryInput",required:!0,className:"form-control",value:this.state.priority,onChange:this.onChangePriority},this.state.priorityList.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Subject: "),r.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.subject,onChange:this.onChangeSubject})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description: "),r.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeDescription})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Date: "),r.a.createElement("div",null,r.a.createElement(N.a,{selected:this.state.date,onChange:this.onChangeDate}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Edit Ticket",className:"btn btn-primary"}))))}}]),a}(n.Component);function L(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(),c=Object(u.a)(i,2),m=c[0],p=c[1],b=Object(n.useContext)(g).setUserData,y=Object(h.f)(),f=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={email:a,password:m},e.next=4,d.a.post("http://localhost:5000/users/login",n);case 4:r=e.sent,b({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),y.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{className:"form",onSubmit:f},r.a.createElement("label",{htmlFor:"login-email"},"Email"),r.a.createElement("input",{id:"login-email",type:"email",onChange:function(e){return o(e.target.value)}}),r.a.createElement("label",{htmlFor:"login-password"},"Password"),r.a.createElement("input",{id:"login-password",type:"password",onChange:function(e){return p(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-primary"})))}function x(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(),c=Object(u.a)(i,2),m=c[0],p=c[1],b=Object(n.useState)(),y=Object(u.a)(b,2),f=y[0],E=y[1],v=Object(n.useState)(),k=Object(u.a)(v,2),C=k[0],j=k[1],S=Object(n.useContext)(g).setUserData,O=Object(h.f)(),N=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={email:a,password:m,passwordCheck:f,displayName:C},e.next=4,d.a.post("http://localhost:5000/users/register",n);case 4:return e.next=6,d.a.post("http://localhost:5000/users/login",{email:a,password:m});case 6:r=e.sent,S({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),O.push("/");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{className:"form",onSubmit:N},r.a.createElement("label",{htmlFor:"register-email"},"Email"),r.a.createElement("input",{id:"register-email",type:"email",onChange:function(e){return o(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-password"},"Password"),r.a.createElement("input",{id:"register-password",type:"password",onChange:function(e){return p(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Re-enter password",onChange:function(e){return E(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-displayName"},"Display Name"),r.a.createElement("input",{id:"register-displayName",type:"text",onChange:function(e){return j(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Register",className:"btn btn-primary"})))}a(168),a(169);function T(){var e=Object(n.useState)({token:void 0,user:void 0}),t=Object(u.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,d.a.post("http://localhost:5000/users/tokenIsValid",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,d.a.get("http://localhost:5000/users/",{headers:{"x-auth-token":t}});case 8:a=e.sent,o({token:t,user:a.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(g.Provider,{value:{userData:a,setUserData:o}},r.a.createElement(y,null),r.a.createElement("div",{className:"container"},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:S}),r.a.createElement(h.a,{path:"/create",component:w}),r.a.createElement(h.a,{path:"/edit/:id",component:D}),r.a.createElement(h.a,{path:"/login",component:L}),r.a.createElement(h.a,{path:"/register",component:x}))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){e.exports=a(170)}},[[81,1,2]]]);
//# sourceMappingURL=main.1653e96c.chunk.js.map